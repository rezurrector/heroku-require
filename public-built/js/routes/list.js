define("WineModel",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"/wines",idAttribute:"_id",initialize:function(){this.validators={},this.validators.name=function(e){return e.length>0?{isValid:!0}:{isValid:!1,message:"You must enter a name"}},this.validators.grapes=function(e){return e.length>0?{isValid:!0}:{isValid:!1,message:"You must enter a grape variety"}},this.validators.country=function(e){return e.length>0?{isValid:!0}:{isValid:!1,message:"You must enter a country"}}},validateItem:function(e){return this.validators[e]?this.validators[e](this.get(e)):{isValid:!0}},validateAll:function(){var e={};for(var n in this.validators)if(this.validators.hasOwnProperty(n)){var r=this.validators[n](this.get(n));r.isValid===!1&&(e[n]=r.message)}return t.size(e)>0?{isValid:!1,messages:e}:{isValid:!0}},defaults:{_id:null,name:"",grapes:"",country:"USA",region:"California",year:"",description:"",picture:null}})}),define("WinesCollection",["jquery","underscore","backbone","WineModel"],function(e,t,n,r){return n.Collection.extend({model:r,url:"/wines"})}),define("text!WineListItemViewTpl",[],function(){return'<a href="#wines/<%= _id %>" class="thumbnail plain" style="text-align: center;">\n    <img src="<%= picture === null ? \'pics/generic.jpg\' : \'pics/\' + picture %>" height="150" width="125" alt="">\n    <h5><%= name %></h5>\n    <%= year %> <%= grapes %><br/>\n    <i class="icon-globe"></i> <%= region %>, <%= country %>\n</a>\n'}),define("WineListItemView",["jquery","underscore","backbone","text!WineListItemViewTpl"],function(e,t,n,r){return n.View.extend({template:t.template(r),tagName:"li",initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.close,this)},render:function(){return e(this.el).html(this.template(this.model.toJSON())),this}})}),define("paginator",["jquery","underscore","backbone"],function(e,t,n){return n.View.extend({className:"pagination pagination-centered",initialize:function(){this.model.bind("reset",this.render,this),this.render()},render:function(){var t=this.model.models,n=t.length,r=Math.ceil(n/8);e(this.el).html("<ul />");for(var i=0;i<r;i++)e("ul",this.el).append("<li"+(i+1===this.options.page?" class='active'":"")+"><a href='#wines/page/"+(i+1)+"'>"+(i+1)+"</a></li>");return this}})}),define("WineListView",["jquery","underscore","backbone","WineListItemView","paginator"],function(e,t,n,r,i){return n.View.extend({initialize:function(){this.render()},render:function(){var t=this.model.models,n=t.length,s=(this.options.page-1)*8,o=Math.min(s+8,n);e(this.el).html('<ul class="thumbnails"></ul>');for(var u=s;u<o;u++)e(".thumbnails",this.el).append((new r({model:t[u]})).render().el);return e(this.el).append((new i({model:this.model,page:this.options.page})).render().el),this}})}),define("routes/list",["jquery","underscore","WinesCollection","WineListItemView","WineListView"],function(e,t,n,r,i){return function(t){var r=t?parseInt(t,10):1,s=new n,o=e.Deferred(),u=o.then(function(){return(new i({model:s,page:r})).el});return s.fetch({success:function(){o.resolve()}}),u}});